<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>AmigoCloud</title>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />
  </head>
<style>
  #map {
  width: 600px;
  height: 300px;
  }
</style>

  <body>
    <div class="leaflet">
      <div id="map">
      </div>
    </div>

    <div class="select">
      <select id="dataset-select">
        <option value="points" data-url="https://www.amigocloud.com/api/v1/users/23/projects/305/datasets/1590/tiles/{z}/{x}/{y}.png">Points Dataset</option>
        <option value="lines" data-url="https://www.amigocloud.com/api/v1/users/23/projects/305/datasets/1591/tiles/{z}/{x}/{y}.png">Lines Dataset</option>
        <option value="polys" data-url="https://www.amigocloud.com/api/v1/users/23/projects/305/datasets/1592/tiles/{z}/{x}/{y}.png">Polygons Dataset</option>
      </select>
    </div>

    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
  </body>
  <script>
    $(document).ready(function () {
        var map,
        osm, amigoLayer, control, controlMaps;

        amigoLayer = L.tileLayer('https://www.amigocloud.com/api/v1/users/23/projects/305/datasets/1590/tiles/{z}/{x}/{y}.png', {});

        osm = L.tileLayer('http://tile.openstreetmap.org/{z}/{x}/{y}.png', {});

        controlMaps = {
            baseMaps: {
                "OpenStreetMap": osm,
            },
            overlayMaps: {
                "AmigoCloud": amigoLayer
            }
        };

        map = L.map('map', {
            layers: [osm, amigoLayer]
        }).setView([-10, -75], 4);

        control = L.control.layers(
            controlMaps.baseMaps, controlMaps.overlayMaps
        ).addTo(map);

        $('#dataset-select').change(function (e) {
            var url = $('#dataset-select option:selected').data('url');

            osm = L.tileLayer('http://tile.openstreetmap.org/{z}/{x}/{y}.png', {});
            amigoLayer = L.tileLayer(url, {});

            map.remove();
            map = L.map('map', {
                layers: [osm, amigoLayer]
            }).setView([-10, -75], 4);

            control.addTo(map);
        });
    });
  </script>
</html>
